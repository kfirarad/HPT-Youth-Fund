import{_ as f,d as C,a,c as i,w as S,b as t,F as v,r as F,e as D,f as A,j as h,k as j,t as E,l as g,v as w,g as I,m as V,p as b,q as U,u as H,s as T,h as P,i as R,x as X}from"./entry-b65801c1.mjs";import{_ as q,a as G}from"./ProjectCard-4947a9f8.mjs";const J=C({__name:"CTAButton",props:{handler:null},setup(l,{expose:n}){n();const{handler:o}=l,s={handleClick:r=>{o&&(r.preventDefault(),o.call(this,r))}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function K(l,n,o,e,s,r){return a(),i("button",{onClick:e.handleClick,class:"my-5 border-2 border-blue-500 hover:bg-blue-500 rounded py-2 px-10 hover:text-white shadow-md hover:shadow-lg transition-all"}," \u05DC\u05EA\u05DE\u05D9\u05DB\u05D4 \u05D1\u05E4\u05E8\u05D5\u05D9\u05D9\u05E7\u05D8 ")}var Q=f(J,[["render",K]]);const W=C({__name:"MoreProjects",props:{excludeProjectId:null},async setup(l,{expose:n}){n();let o,e;const s=l,r=A(),{excludeProjectId:u}=s,c=([o,e]=S(()=>r.fetchProjects()),o=await o,e(),o),d={props:s,supabase:r,excludeProjectId:u,projects:c};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}}),Y=t("h2",{class:"m-10 text-3xl text-center"},"\u05E2\u05D5\u05D3 \u05E4\u05E8\u05D5\u05D9\u05D9\u05E7\u05D8\u05D9\u05DD",-1),Z={class:"w-full flex items-top justify-center align-top"},ee={class:"w-1/2 xl:w-1/3 m-3"};function te(l,n,o,e,s,r){const u=q;return a(),i("div",null,[Y,t("div",Z,[(a(!0),i(v,null,F(e.projects.filter(c=>c.id!==e.excludeProjectId),c=>(a(),i("div",ee,[D(u,{project:c},null,8,["project"])]))),256))])])}var ue=f(W,[["render",te]]);const ne=C({__name:"Form",props:["handlePaymentClick"],setup(l,{expose:n}){n();const o=h(100),e=[100,200,500],s=h({}),r=h();var u=new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS",maximumFractionDigits:0});const c=_=>{var y;const x=(y=_.target.value.match(/\d/g))==null?void 0:y.join("");x?(m(x),_.target.value=u.format(x)):_.target.value=null},d=_=>{m(_),r.value.value=""},m=_=>{o.value=_},p={x:o,options:e,paymentDetails:s,otherAmountInput:r,formatter:u,handleChange:c,handleClick:d,setAmount:m};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),oe={class:"w-full"},le={class:"border border-solid border-gray-300 p-3"},se=t("legend",null,"\u05E1\u05DB\u05D5\u05DD \u05D4\u05EA\u05DE\u05D9\u05DB\u05D4",-1),re=["onClick"],ae={class:"w-full"},ce={class:"border border-solid border-gray-300 p-3"},ie=t("legend",null,"\u05E4\u05E8\u05D8\u05D9 \u05D7\u05D9\u05D5\u05D1",-1);function de(l,n,o,e,s,r){return a(),i(v,null,[t("div",oe,[t("fieldset",le,[se,(a(),i(v,null,F(e.options,u=>t("button",{class:j(["input",{"bg-blue-500":u===e.x,"text-white":u===e.x,"hover:bg-blue-400":u!==e.x}]),onClick:c=>e.handleClick(u)}," \u20AA"+E(u),11,re)),64)),t("input",{type:"tel",pattern:"d+",placeholder:"\u05E1\u05DB\u05D5\u05DD \u05D0\u05D7\u05E8",size:"8",class:j(["outline-gray-300 border-2 border-gray-300 rounde-md py-1 px-2 input text-center",{"bg-blue-500":!e.options.includes(e.x),"text-white":!e.options.includes(e.x)}]),onChange:e.handleChange,ref:"otherAmountInput"},null,34)])]),t("div",ae,[t("fieldset",ce,[ie,g(t("input",{type:"tel",placeholder:"\u05EA.\u05D6 / \u05D7.\u05E4","onUpdate:modelValue":n[0]||(n[0]=u=>e.paymentDetails.ID=u),class:"input"},null,512),[[w,e.paymentDetails.ID]]),g(t("input",{type:"text",placeholder:"\u05E9\u05DD \u05DE\u05DC\u05D0 / \u05E9\u05DD \u05D4\u05E2\u05E1\u05E7","onUpdate:modelValue":n[1]||(n[1]=u=>e.paymentDetails.name=u),class:"input"},null,512),[[w,e.paymentDetails.name]]),g(t("input",{type:"tel",placeholder:"\u05D8\u05DC\u05E4\u05D5\u05DF","onUpdate:modelValue":n[2]||(n[2]=u=>e.paymentDetails.phone=u),class:"input"},null,512),[[w,e.paymentDetails.phone]]),g(t("input",{type:"text",placeholder:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05DE\u05DC\u05D0\u05D4","onUpdate:modelValue":n[3]||(n[3]=u=>e.paymentDetails.address=u),class:"input"},null,512),[[w,e.paymentDetails.address]])])]),t("div",null,[t("button",{onClick:n[4]||(n[4]=u=>o.handlePaymentClick(e.paymentDetails,e.x)),class:"text-white bg-blue-500 px-4 py-2 rounded-md mt-4 w-full md:w-auto"}," \u05D4\u05DE\u05E9\u05DA \u05DC\u05EA\u05E9\u05DC\u05D5\u05DD ")])],64)}var _e=f(ne,[["render",de]]);function De(l,n){return a(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[D("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])}function me(l,n){return a(),I("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[D("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])}var M=(l=>(l[l.Form=0]="Form",l[l.Payment=1]="Payment",l[l.Success=2]="Success",l[l.Failure=3]="Failure",l))(M||{});const pe=C({__name:"PaymentModal",setup(l,{expose:n}){n();const{getIframeUrl:o}=A(),e=h(),s=h(0),u={Status:M,getIframeUrl:o,iframeUrl:e,currentStatus:s,handlePaymentClick:async(c,d)=>{s.value=1,e.value=await o({paymentDetails:c,amount:d}),window.addEventListener("message",m=>{console.log("a");const{origin:p,data:_}=m;p===window.document.location.origin&&_==="SUCCESS"?s.value=2:s.value=3},{once:!0})},CheckCircleIcon:De,XCircleIcon:me};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),Ee={key:0},he={class:"text-blue-500"},fe=t("p",null,"\u05D4\u05EA\u05E9\u05DC\u05D5\u05DD \u05D4\u05EA\u05E7\u05D1\u05DC \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4!",-1),xe=t("p",null,"\u05D0\u05E0\u05D5 \u05DE\u05D5\u05D3\u05D9\u05DD \u05DC\u05DA \u05E2\u05DC \u05EA\u05E8\u05D5\u05DE\u05EA\u05DA \u05DC\u05E7\u05E8\u05DF \u05DE\u05D7\u05DC\u05E7\u05EA \u05D4\u05E0\u05D5\u05E2\u05E8 \u05E9\u05DC \u05D4\u05E4\u05D5\u05E2\u05DC \u05E4\u05EA\u05D7-\u05EA\u05E7\u05D5\u05D4.",-1),ve=t("p",null,"\u05D9\u05D0\u05DC\u05DC\u05D4 \u05D4\u05E4\u05D5\u05E2\u05DC!",-1),Ce={key:1},ye={class:"text-red-500"},ge=t("p",null,"\u05EA\u05E7\u05DC\u05D4 \u05D1\u05EA\u05E9\u05DC\u05D5\u05DD. \u05DC\u05D0 \u05D1\u05D5\u05E6\u05E2 \u05D7\u05D9\u05D5\u05D1.",-1),we=t("p",null,"\u05D0\u05E0\u05D0 \u05E0\u05E1\u05D4 \u05E9\u05E0\u05D9\u05EA.",-1),be={key:2,class:"h-full"},Ae=["src"],ke={key:3};function je(l,n,o,e,s,r){const u=_e;return e.currentStatus===e.Status.Success?(a(),i("div",Ee,[t("span",he,[D(e.CheckCircleIcon,{className:"h-20 w-20 "})]),fe,xe,ve])):e.currentStatus===e.Status.Failure?(a(),i("div",Ce,[t("span",ye,[D(e.XCircleIcon,{className:"h-20 w-20"})]),ge,we])):e.currentStatus===e.Status.Payment?(a(),i("div",be,[t("iframe",{src:e.iframeUrl,style:{height:"90vh",width:"90vh"}},null,8,Ae)])):(a(),i("div",ke,[D(u,{handlePaymentClick:e.handlePaymentClick})]))}var Pe=f(pe,[["render",je]]);const Se={__name:"Modal",props:["isOpen","closeModal","title"],setup(l,{expose:n}){n();const o=l,{isOpen:e,closeModal:s}=V(o),r={props:o,isOpen:e,closeModal:s};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Fe={key:1,class:"min-w-1/2 min-h-1/2 max-w-screen max-h-screen z-20 top-1/2 left-1/2 fixed rounded-lg bg-white -translate-x-1/2 -translate-y-1/2 overflow-hidden"},Ie={class:"min-w-1/2 max-w-screen"},Me={class:"min-h-full items-center justify-center p-4 text-center flex flex-col"},Be={class:"text-lg font-medium leading-6 text-gray-900 text-right"},Le={class:"mt-2 max-h-screen"};function Oe(l,n,o,e,s,r){return a(),i(v,null,[e.isOpen?(a(),i("div",{key:0,class:"fixed inset-0 overflow-y-auto bg-black bg-opacity-50 p-4 flex items-center justify-center z-10",onClick:n[0]||(n[0]=u=>e.closeModal())})):b("",!0),e.isOpen?(a(),i("div",Fe,[t("div",Ie,[t("div",Me,[t("h3",Be,E(o.title),1),t("div",Le,[U(l.$slots,"default")])])])])):b("",!0)],64)}var $e=f(Se,[["render",Oe]]);const ze=C({__name:"[id]",async setup(l,{expose:n}){n();let o,e;const s=A(),{params:r}=H(),{id:u}=r,c=([o,e]=S(()=>s.fetchProject(u)),o=await o,e(),o),d=h(!1),m=h(100),{title:p,description:_,image:x,raised:y,target:B,donorsCount:L,details:O}=c,$=new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS",maximumFractionDigits:0}),z=()=>{d.value=!1},N=()=>{d.value=!0};T({title:` ${p} | \u05E7\u05E8\u05DF \u05DE\u05D7\u05DC\u05E7\u05EA \u05D4\u05E0\u05D5\u05E2\u05E8 \u05E9\u05DC \u05D4\u05E4\u05D5\u05E2\u05DC \u05E4\u05EA\u05D7-\u05EA\u05E7\u05D5\u05D4`});const k={supabase:s,params:r,projectId:u,project:c,isFormOpen:d,donation:m,title:p,description:_,image:x,raised:y,target:B,donorsCount:L,details:O,formatter:$,closeModal:z,ctaHandler:N};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),Ne=X("\u2192\u05E7\u05E8\u05DF \u05DE\u05D7\u05DC\u05E7\u05EA \u05D4\u05E0\u05D5\u05E2\u05E8 \u05E9\u05DC \u05D4\u05E4\u05D5\u05E2\u05DC \u05E4\u05EA\u05D7-\u05EA\u05E7\u05D5\u05D4"),Ve={class:"size-1/2 text-4xl mb-10 text-center"},Ue={class:"w-full flex flex-col lg:flex-row"},He={class:"w-full lg:w-1/2 pl-10"},Te={class:"text-slate-500 text-lg"},Re={class:"text-blue-500 text-2xl font-bold"},Xe={class:"text-slate-500 text-lg"},qe={class:"text-xl mt-5"},Ge={class:"w-full lg:w-1/2"},Je=["src"],Ke={key:0},Qe=t("h2",{class:"text-2xl mt-10"},"\u05EA\u05D9\u05D0\u05D5\u05E8 \u05D4\u05E4\u05E8\u05D5\u05D9\u05D9\u05E7\u05D8",-1),We=["innerHTML"],Ye={class:"text-xl"};function Ze(l,n,o,e,s,r){const u=R,c=G,d=Q,m=ue,p=Pe,_=$e;return a(),i(v,null,[t("div",null,[D(u,{to:"/"},{default:P(()=>[Ne]),_:1}),t("h1",Ve,E(e.title),1),t("div",Ue,[t("div",He,[D(c,{value:e.raised/e.target*100},null,8,["value"]),t("div",null,[t("div",Te,E(e.donorsCount)+" \u05EA\u05D5\u05E8\u05DE\u05D9\u05DD",1),t("div",Re,E(e.formatter.format(e.raised)),1),t("div",Xe," \u05DE\u05EA\u05D5\u05DA \u05D9\u05E2\u05D3 \u05E9\u05DC "+E(e.formatter.format(e.target)),1)]),t("div",qe,E(e.description),1),t("div",null,[D(d,{handler:e.ctaHandler})])]),t("div",Ge,[t("img",{src:e.image,class:"w-full"},null,8,Je)])]),e.details&&e.details.length?(a(),i("div",Ke,[Qe,t("div",{innerHTML:e.details},null,8,We),t("div",null,[D(d,{handler:e.ctaHandler})])])):b("",!0),D(m,{"exclude-project-id":e.project.id},null,8,["exclude-project-id"])]),D(_,{"is-open":e.isFormOpen,"close-modal":e.closeModal},{default:P(()=>[t("h3",Ye,"\u05EA\u05DE\u05D9\u05DB\u05D4 \u05D1\u05E4\u05E8\u05D5\u05D9\u05D9\u05E7\u05D8 "+E(e.title),1),D(p)]),_:1},8,["is-open"])],64)}var ut=f(ze,[["render",Ze]]);export{ut as default};
